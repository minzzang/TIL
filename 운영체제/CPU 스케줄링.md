# CPU 스케줄링
## 1. CPU 스케줄러
- 준비 상태에 있는 프로세스들 중에 어떠한 프로세스에게 CPU를 할당할지를 결정하는 운영체제의 코드이다.

- CPU 스케줄링 방식에는 선점형 방식과 비선점형 방식이 있다.
	- 선점형 방식 : 프로세스가 CPU를 계속 사용하기를 원하더라도 강제로 빼앗을 수 있는 스케줄링 방식

	- 비선점형 방식 : CPU를 획득한 프로세스가 스스로 CPU를 반납하기 전까지는 CPU를 빼앗기지 않는 스케줄링 방식
## 2. 스케줄링의 성능 평가
- 스케줄링 기법의 성능을 평하기 위해서 여러 지표들이 사용되는데,
 크게 시스템 관점의 지표와 사용자 관점의 지표로 나눌 수 있다.

	- CPU 활용도 : 전체 시간 중 CPU가 명령을 수행한 시간의 비율
	- 처리량 : 주어진 시간 동안 CPU 버스트를 완료한 프로세스의 개수

	- 소요 시간 : 프로세스가 CPU 요청 시점부터 CPU 버스트가 끝날 때까지 걸린 시간
	- 대기 시간 : 프로세스가 CPU 버스트 기간 중 준비 큐에서 기다린 시간의 합
	- 응답 시간 : 프로세스가 CPU 요청 시점부터 처음으로 CPU를 얻을 때까지 기다린 시간	
## 3. 스케줄링 알고리즘

- FCFS(First-Come-First-Served) 
	-  프로세스가 준비 큐에 도착한 시간 순서대로 CPU를 할당하는 방식이다. 
	- FCFS는 CPU를 할당 받은 프로세스가 자발적으로 반납할때까지 CPU를 선점하지 않는다. 

	- 이때 먼저 도착한 프로세스들이 CPU 버스트 시간이 길다면 CPU를 오래 사용하기 때문에 효율성이 떨어지는 단점이 있다.

- SJF(Shortest-Job-First) : CPU 버스트가 가장 짧은 프로세스에게 제일 먼저 CPU를 할당하는 방식이다.  SJF 스케줄링은 평균 대기 시간을 가장 짧게 하는 최적의 알고리즘으로 알려져 있다.
	- 비선점형 SJF : 일단 CPU를 획득하면 그 프로세스가 자진 반납하기 전까지 CPU를 선점당하지 않는다.

	- 선점형 SJF : 현재 CPU에서 실행중인 프로세스의 남은 CPU버스트보다 짧은 CPU버스트 시간을 가지는 프로세스가 준비 큐에 도착하면 CPU를 빼앗긴다. `선점형 SJF 알고리즘에서는 남아 있는 CPU 버스트가 긴 프로세스가 새로 들어오는 CPU 버스트가 짧은 프로세스들 때문에 CPU를 얻지 못하고 계속 대기하는 문제점이 있다.`

- 우선순위 스케줄링 
	-  준비 큐에서 기다리는 프로세스 중에서 우선순위가 가장 높은 프로세스에게 제일 먼저 CPU를 할당하는 방식이다. 
	- 우선순위 스케줄링도 선점형 방식과 비선점형 방식이 있는데 선점형 방식에서는 SJF 알고리즘과  같은 우선순위가 높은 프로세스들로 인해 우선순위가 낮은 프로세스들이 계속 기다리는 문제점이 있다.
 
	- `우선순위 스케줄링에서는 이러한 문제를 aging기법을 통해 해결한다. aging기법이란 오래 기다린 프로세스들의 우선 순위를 높여주는 방식이다.`

- 라운드 로빈 스케줄링 
	- 각 프로세스가 CPU를 연속적으로 사용할 수 있는 시간이 특정 시간으로 제한되며, 이 시간이 경과하면 이 프로세스로부터 CPU를 회수해 다른 프로세스에게 CPU를 할당한다. 
	- 라운드 로빈 방식은 CPU를 사용하는 시간을 짧게 설정해서 여러 프로세스들이 CPU를 돌아가면서 쓸 수 있어 응답 속도가 빠른 장점이 있고 CPU버스트가 짧은 CPU는 빨리 끝나고 CPU버스트가 긴 CPU는 상대적으로 오래 기다리게 된다. 

	- 즉, 프로세스의 CPU 사용량에 비례해 소요시간이 증가하게 되므로 합리적이라고 할 수 있다. `그러나 CPU 사용시간을 너무 짧게 설정하면 프로세스를 교체하는 문맥교환 오버헤드가 증가하게 된다.`

- 멀티 레벨 큐 
	- 멀티 레벨 큐는 준비 큐를 여러 개로 분할해 관리하는 스케줄링 기법을 말한다. 

	- 멀티 레벨 큐에서 준비 큐는 보통 대화형 작업을 담기 위한 전위큐와 계산 위주의 작업을 담기 위한 후위 큐로 분할하여 운영한다.
	-  전위 큐에서는 응답 시간을 짧게 하기 위해 라운드 로빈 스케줄링을 사용하고 계산 위주의 작업인 후위 큐에서는 FCFS 스케줄링을 사용해 문맥 교환 오버헤드를 줄인다.
	-  `멀티 레벨 큐에서는 여러 준비 큐에 대해 어느 큐에 CPU를 할당한 것인지에 대한 스케줄링도 필요하다.` 보통 고정 우선 순위 방식을 사용하는데 우선순위가 높은 큐를 먼저 서비스하고 우선순위가 낮은 큐는 우선순위가 높은 큐가 비어 있을 때에만 서비스하는 방식이다.`

- 멀티 레벨 피드백 큐 
	- 프로세스를 여러 큐에 줄 세운다는 측면에서 멀티 레벨큐와 동일하지만 프로세스가 하나의 큐에서 다른 큐로 이동 가능하다는 점이 다르다.

	-  멀티 레벨 피드백의 준비 큐는 3개의 큐로 이루어진다. 상위 두 개는 각각 할당 시간이 5와 10인 라운드 로빈 스케줄링을 사용하고 세번째 큐는 FCFS 스케줄링 기법을 사용한다.
	-  프로세스는 준비 큐에 도착하면 가장 우선순위가 높은 큐에 줄서게 된다. 짧은 대화형 프로세들은 빨리 서비스 받고 작업을 완료 할 수 있고 CPU 버스트 시간이 5보다 긴 작업을 들은 할당 시간이 10인 하위 큐로 내려가 줄 서게 된다.
	- 할당 시간이 10인 하위 큐에서도 작업을 완료하지 못하면 세번째 큐로 내려간다. `이러한 방식은 작업 시간이 짧은 프로세스들을 빨리 서비스 받게 하고 작업 시간이 긴 프로세스에 대해 문맥 교환 없이 CPU작업에만 열중할 수 있는 FCFS 방식을 채택하도록 한다.` 