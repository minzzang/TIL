# 인터럽트의 원리
## 1. 프로그램의 구조와 인터럽트
- 함수의 호출 원리와 인터럽트의 동작원리는 비슷하다.  x라는 함수가 y라는 함수를 호출할 때 스택에 y 함수를 호출한 지점을 저장한 후 y함수가 수행된 후 스택에 저장된 y 함수를 호출한 지점으로 돌아가 x함수의 다음 명령어를 수행할 수 있게된다. 

- 인터럽트도 마찬가지로 A라는 프로그램이 CPU를 할당받고 명령을 수행하고 있는데 인터럽트가 발생하면 A는 현재 수행중인 명령의 위치를 저장해 놓고 인터럽트 처리 루틴으로 넘어가 인터럽트를 처리하고 다시 돌아와 A의 이전 작업 지점부터 수행을 계속 이어가게 된다. 
- 이 때 차이점은 함수는 프로그램의 주소 공간 중 스택에 저장되고 인터럽트 때문에 CPU를 선점당한 위치를 저장하는 공간은 운영 체제 커널에 존재한다.
## 2. 인터럽트
- CPU는 매번 프로그램 카운터가 가리키고 있는 지점의 명령을 하나씩 수행하고나서 다음 명령을 수행하기 직전에 인터럽트 라인이 세팅되었는지 체크한다.

- 인터럽트 벡터 : 여러가지 인터럽트에 대해 해당 인터럽트 발생시 처리해야 할 루틴의 주소를 보관하는 테이블
- 인터럽트 핸들러 : 인터럽트 서비스 루틴이라고도 부르며 인터럽트가 발생했을 때 실제로 커널이 수행해야 할 코드이다.
- 인터럽트가 발생하고 나면 인터럽트 서비스 루틴을 수행하고 다시 CPU의 제어권을 인터럽트 이전 프로세스에게 넘기는데 타이머 인터럽트가 발생했을 때는 이전 프로세스에게 제어권을 넘기지 않는다.
## 3. 시스템 콜
- 시스템 콜은 커널에 존재하는 함수를 호출하는 것이다. 프로그램 실행 중 시스템 콜을 하는 방법은 스스로 인터럽트 라인을 세팅하는 것이다.
-  CPU는 명령어를 수행한 후 인터럽트 라인을 매번 확인하기 때문에 인터럽트를 통해 커널로 제어권이 넘어가 커널에 함수를 사용할 수 있게 된다.

- CPU를 할당받고 명령을 수행하다가 CPU를 선점 당하는 두가지 : 타이머 인터럽트, 입출력 시스템 콜 

