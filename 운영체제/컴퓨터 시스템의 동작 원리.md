# 컴퓨터 시스템의 동작 원리
## 1. CPU와 I/O 연산
-  컴퓨터에서 연산을 한다는 것은 CPU가 무언가 일을 한다는 뜻이다. 입출력 장치와 메인 CPU는 동시 수행이 가능하다. 예를 들어 B라는 프로그램이 현재 CPU를 할당 받고 프로그램 코드를 수행중이고, A라는 프로그램은 하드 디스크에서 정보를 읽어오는 작업을 수행하는 상황을 생각해 볼 수 있다. 이러한 일이 가능한 이유는 두 가지 일이 다른 곳 ` 컴퓨터 내부(CPU,메모리), 컴퓨터 외부 장치(I/O) `에서 발생 하기 때문이다. 
## 1. 인터럽트의 일반적인 기능
- 인터럽트 처리 루틴 : 인터럽트가 들어왔을 때 해야 할일

- 디스크 컨트롤러가 인터럽트를 발생시키면 CPU는 하던 일을 멈추고 이 인터럽트가 발생했을 때 수행해야 할 코드 영역으로 가서 정의된 일을 수행하게 된다. 이때 인터럽트 처리 전에 수행주이던 작업이 무엇이었는지 반드시 저장해야 한다.
## 2. 인터럽트 핸들링
- 인터럽트가 발생한 경우에 처리해야 할 일의 절차

- 인터럽트 처리 루틴으로 넘어와서 함수 호출이 이루어질 경우에는 각 프로세스별로 독자적인 커널 스택을 사용하게 된다.
## 3. 입출력 구조

- 동기식 입출력 : 입출력 요청 후 입출력 작업이 완료된 후에야 CPU의 제어권이 그 프로그램에게 다시 넘어갈 수 있는 방식, 그러나 입출력 작업이 완료될 때까지 CPU가 아무일도 할 수 있기 때문에 CPU를 선점해 다른 프로세스에게 이양해 CPU를 쉬지 않고 일도록 관리한다. 

- 비동기식 입출력 : 입출력 연산을 요청한 후에 연산이 끝나기를 기다리는 것이 아니라 CPU의 제어권을 입출력 연산을 호출한 그 프로그램에게 곧 바로 다시 부여하는 방식이다.
## 4. DMA(Direct Memory Access)
- 원칙적으로 메모리는 CPU에 의해서만 접근 가능하다. 그러나 모든 메모리 접근 연산이 CPU에 의해서만 이루어질 경우 주변 장치가 메모리 접근을 원할 때마다 인터럽트를 통해 CPU의 업무가 방해를 받게 되어 효율성이 떨어지게 된다. 그래서 DMA를 사용하여 CPU대신 주변 장치들의 메모리 접근을 담당하게 한다.
## 5. 저장 장치의 구조
- 주 기억장치 : 메모리라고 부르며 전원이 나가면 저장되었던 내용이 모두 사라지는 휘발성의 RAM을 사용

- 보조 기억장치 : 비휘발성의 마그네틱 디스크를 사용 
	- 파일 시스템 : 전원이 나가도 유지해야 할 정보가 있으면 보조 기억장치에 저장

	- 스왑 영역 : 메모리는 크기가 한정되고, 용량이 적어 프로그램에 수행에 꼭 필요한 부분만 메모리에 올리고 그렇지 않은 부분은 스왑영역에 두어 필요할 메모리 영역으로 이동시킨다.
## 6. 하드웨어 보안
- 어떤 프로그램이 다른 프로그램의 메모리 영역이나 파일 영역을 침범하는 등 시스템에 중요한 영향을 미치는 연산은 커널 모드에서만 실행 가능하도록 함으로써 하드웨어의 보안을 유지할 수 있다. 커널 모드와 사용자 모드는 하드웨어적으로 모드비트를 두어 0이면 커널 모드, 1이면 사용자 모드이다.
## 7. 메모리 보안
- 기준 레지스터 : 어떤 프로그램이 수행되는 동안 그 프로그램이 합법적으로 접근할 수 있는 메모리 상의 가장 작은 주소를 보관

- 한계 레지스터 : 그 프로그램이 기준 레지스터 값부터 접근할 수 있는 메모리의 범위를 보관
## 8. CPU 보호
- 특정 프로그램이 무한 반복문 등 부적절한 방법으로 CPU를 독점하고 있으면 다른 프로그램이나 운영체제는 CPU의 제어권을 획득할 수 없다. 이와 같은 문제를 해결하기 위해 타이머라는 하드웨어를 사용한다. 정해진 시간이 지나면 인터럽트를 발생시켜 운영체제에게 CPU의 제어권을 이양시킨다.