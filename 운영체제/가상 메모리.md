# 가상 메모리
## 1. 요구 페이징
- 당장 사용될 페이지만을 메모리에 올리는 방식으로 특정 페이지에 대해 CPU의 요청이 들어온 후에야 해당 페이지를 메모리에 적재한다.
- CPU가 참조하려는 페이지가 현재 메모리에 올라와 있지 않아 유효-무효 비트가 무효로 세팅되어 있는 경우를 `페이지 부재`가 일어났다고 말한다.

	- 요구 페이징의 페이지 부재 처리
		- 부재 페이지를 메모리에 적재하기 전에 페이지에 대한 접근이 적법한지 판단한다.`읽기 전용 페이지에 대해 쓰기 접근을 하려는지 판단`
		- 물리적 메모리에서 비어 있는 프레임을 할당 받아 그 공간에 해당 페이지를 읽어온다.

		- 비어 있는 프레임이 없다면 기존에 메모리에 있던 페이지 중 하나를 스왑 영역으로 쫒아낸다.
		- 요청된 페이지를 디스크로부터 메모리에 적재하는 것은 오래걸리기 때문에 페이지 부재를 발생시킨 프로세스는 CPU를 빼앗기고 봉쇄 상태가 된다.
	- 요구 페이징의 성능
		- 페이지 부재의 발생 빈도는 성능에 가장 큰 영향을 준다.

		-  요청한 페이지를 참조하는 데 걸리는 유효 접근 시간이 짧을수록 요구 페이징의 성능은 향상된다.

## 2. 페이지 교체
- FIFO 알고리즘
	- 페이지 교체시 물리적 메모리에 가장 먼저 적재된 페이지를 우선적으로 내쫓는다. 

	- 페이지에 향후 참조 가능성을 고려하지 않고, 물리적 메모리에 들어온 순서로 내쫓을 대상을 선정하기 때문에 비효율적인 상황이 발생할 수 있다.

- LRU 알고리즘
	- 성능 향상을 위해서는 향후 사용될 가능성이 적은 페이지를 우선적으로 메모리에서 내쫓는 것이 바람직하다.

	- 시간 지역성이란 최근에 참조된 페이지가 가까운 미래에 다시 참조될 가능성이 높은 성질을 말한다.
	- LRU는 시간 지역성을 활용해 가장 오래 전에 참조가 이루어진 페이지를 내쫓는다.

- LFU 알고리즘
	- 물리적 메모리 내에 존재하는 페이지 중에서 과거에 참조 횟수가 가장 적었던 페이지를 내쫓는다.

	- 성능 향상을 위해 최저 참조 횟수 페이지 중에서 가장 오래 전에 참조된 페이지를 지우도록 구현할 수 있다.
	- 참조 횟수를 게산하는 방식에 따라 Incache-LFU와 Perfet-LFU로 나뉜다.
		- Incache : 메모리에서 쫓겨났다가 다시 들어온 경우 참조 횟수는 1부터 다시 시작한다.

		- Perpect : 쫓겨났다가 다시 들어와도 참조 횟수가 계속 누적되는 방식이다.
	
- 클럭 알고리즘
	- LRU를 근사시킨 알고리즘으로 오랫동안 참조되지 않은 페이지 중 하나를 교체한다.

	- 클럭 알고리즘은 교체 페이지를 선정하기 위해 페이지 프레임들의 참조 비트를 순차적으로 조사한다.
	- 참조 비트가 1인 페이지는 0으로 바꾼 후 그냥 지나가고 참조 비트가 0인 페이지는 교체한다.
	- 모든 페이지 프레임을 다 조사한 경우 첫 번째 프레임부터 조사 작업을 반복하기 때문에 모든 페이지를 다 조사할 때까지 메모리를 유지시켜 페이지 부재율을 줄일 수 있다.
## 3. 전역 교체와 지역 교체
- 지역 교체 
	- 현재 수행중인 프로세스에게 할당된 프레임 내에서만 교체 대상을 선정하는 방법이다. 

	- 프로세스마다 페이지 프레임을 미리 할당하는 것을 전제로 한다.
- 전역 교체
	- 모든 페이지 프레임이 교체 대상이 될 수 있는 방법이다. 
	- 페이지 프레임을 미리 할당할 필요없이 전체 메모리를 공유해서 사용한다.

	- 페이지 교체시 다른 프로세스에 할당된 프레임을 빼앗아 올 수 있어 프로세스 별 할당량을 조절할 수 있다.
	
## 4. 스레싱
- 페이지 부재율이 상승해 CPU 이용률이 급격하게 떨어지는 현상
- 다중 프로그래밍의 정도(MPD)는 메모리에 동시에 올라가 있는 프로세스의 수를 뜻한다.

- CPU 이용률이 낮으면 운영체제는 MPD를 올려 이용률을 높인다.
- MPD가 과도하게 높아지게 되면 각 프로세스에게 할당되는 메모리의 양이 지나치게 감소하게 된다. 그렇게 되면 프로세스가 수행되기 위한 최소 페이지 프레임도 할당받지 못해 페이지 부재가 자주 발생한다.
- 페이지 부재로 인해 많은 프로세스들이 봉쇄상태가 되고 준비 큐에 프로세스가 없다면 CPU는 이용률이 낮다고 판단해 MPD를 올릴 것이다.
- 이런 상황을 피하기 위해 MPD를 적절히 조절해 CPU 이용률을 높이고 스레싱을 발생을 방지하는 방법이 있다.
	- 워킹셋 알고리즘

	-  페이지 부재 빈도 알고리즘
 